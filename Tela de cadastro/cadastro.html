<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Cadastro - Cpaas</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="/Tela de cadastro/Assets/fonts/stylesheet.css">
    <link rel="shortcut icon" href="/Tela de cadastro/Assets/img/telecall.png" type="image/x-icon">
    
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
</head>

<body class="d-flex justify-content-center" style="margin-top: 15rem; background-color: rgba(9, 64, 133, 0.992);">
  
  <header class="fixed-top">
    <nav class="navbar navbar-light bg-light" style="background-image: linear-gradient(0.1deg, #0062a2, #ca1c2a);">
      <a class="navbar-brand" href="#">
        <img src="/Tela de cadastro/Assets/img/modavo_logo.png" width="200" height="30" class="d-inline-block align-top" alt="">
      </a>
      <ul class="nav justify-content-end" style="font-size: 20px; font-weight: bold;">
        
        <li class="nav-item">
          <a style="color: white; border: 3px solid black; border-radius: 15px; background-color:#ca1c2a;" class="nav-link" href="/Tela de login/login.html">Já tenho conta!</a>
        </li>
      
      </ul>
    </nav>
  </header>

  <div class="container" style="width: 90%; margin-bottom: 10rem; margin-top: -30px; border: 3px solid black; border-radius: 20px; background-image: linear-gradient(45deg, #0062a2, #ca1c2a); box-shadow: 20px 20px 5px rgba(0, 0, 0, 0.212);">
    
    <form id="registrationForm" class="form-signin needs-validation" novalidate style="margin-top: 30px;">
      
      <!-- ... conteúdo do formulário ... -->
      
      <div class="form-row">
        <div class="form-group col-md-6">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputMaterno">Nome</label>
          <input type="text" class="form-control " id="inputMaterno" placeholder="Nome de RG" pattern="[A-Za-z\s]+" required autocomplete="off">
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, preencha seu nome de registro.</div>
        </div>
        
        <div class="form-group col-md-6">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputName">Usuário</label>
          <input type="text" class="form-control" id="inputName" placeholder="Digite seu usuário" pattern="[A-Za-z0-9]+" maxlength="8" required autocomplete="off">
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, use apenas letras e números, sem espaços.</div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label style="font-size: 18px; font-family: poppinsbold; color: white;" for="inputDate">Data de nascimento</label>
          <input type="date" class="form-control" id="inputDate" maxlength="8" required autocomplete="off">
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, preencha uma data válida.</div>
        </div>
        
        
        <div class="form-group col-md-6">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputCPF">CPF</label>
          <input type="text" class="form-control" id="inputCPF" placeholder="Digite seu CPF" pattern="[0-9]{11}" required autocomplete="off">
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, preencha seu CPF.</div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputEmail4">E-mail</label>
          <input type="email" class="form-control" id="inputEmail4" placeholder="Digite seu e-mail" required>
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, preencha seu e-mail.</div>
        </div>
        
        <div class="form-group col-md-6">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputPassword4">Senha</label>
          <div class="input-group">
            <input type="password" class="form-control" id="inputPassword4" placeholder="Senha" minlength="8" maxlength="16" required>
            <div class="input-group-append">
              <span class="input-group-text" id="togglePassword" style="cursor: pointer; border-radius: 5px; margin-left: 5px; background-color: white;" onclick="toggleSenhaVisibility()">
                <img id="toggleIcon" src="/Tela de cadastro/Assets/img/visualizar.png" alt="Mostrar Senha">
              </span>
            </div>
            <div class="valid-feedback" style="display: none;">Correto!</div>
            <div class="invalid-feedback">A senha deve ter pelo menos 8 caracteres.</div>
          </div>
        </div>
      </div>


      <div class="form-group">
        <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputConfirm">Confirme sua senha</label>
        <input type="password" class="form-control" id="inputConfirm" placeholder="Digite a senha novamente" minlength="8" maxlength="16" required autocomplete="off">
        <div class="valid-feedback">Correto!</div>
        <div class="invalid-feedback">Repita sua senha.</div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputTel">Telefone</label>
          <input type="tel" class="form-control" id="inputTel" placeholder="(xx) xxxx-xxxx" pattern="[0-9]{10}" required autocomplete="off">
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, digite seu telefone residêncial.</div>
        </div>
        
        <div class="form-group col-md-6">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputCel">Celular</label>
          <input type="tel" class="form-control" id="inputCel" placeholder="(xx) xxxxx-xxxx" pattern="[0-9]{11}" required autocomplete="off">
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, digite seu celular para contato.</div>
        </div>
      </div>
      
      <div class="form-group">
        <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputAddress">Endereço</label>
        <input type="text" class="form-control" id="inputAddress" placeholder=" Rua dos Bobos, nº 0, bairro Paulista" minlength="7" required autocomplete="off">
        <div class="valid-feedback">Correto!</div>
        <div class="invalid-feedback">Por favor, preencha seu endereço.</div>
      </div>
      
      <div class="form-group">
        <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputComplement">Complemento</label>
        <input type="text" class="form-control" id="inputComplement" placeholder=" Apartamento, hotel, casa, etc.">
      </div>
      
      <div class="form-row">
        <div class="form-group col-md-6">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputCity">Cidade</label>
          <input type="text" class="form-control" id="inputCity" placeholder="Nilópolis, Bonsucesso, Centro, etc." minlength="5" required autocomplete="off">
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, digite sua cidade natal.</div>
        </div>
        
        <div class="form-group col-md-4">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputSexo">Gênero</label>
          <select required id="inputSexo" class="form-control">
          <option value="" selected disabled>...</option>
            <option>Masculino</option>
            <option>Feminino</option>
            <option>Não binário</option>
            <option>Prefiro não dizer</option>
            <option>Outros</option>
            <option>Gênero fluido</option>
            <option>Agênero</option>
            <option>Bigênero</option>
          </select>
          <div class="valid-feedback">Gênero selecionado!</div>
          <div class="invalid-feedback">Por favor, selecione um gênero.</div>
        </div>
        
        <div class="form-group col-md-2">
          <label style="color: white; font-size: 18px; font-family: poppinsbold;" for="inputCEP">CEP</label>
          <input type="text" class="form-control" id="inputCEP" placeholder="Digite seu CEP" pattern="[0-9]{8}" required autocomplete="off">
          <div class="valid-feedback">Correto!</div>
          <div class="invalid-feedback">Por favor, digite seu CEP.</div>
        </div>
      </div>
      
      <button id="cadastro" style="width: 100%; border-radius: 18px; font-family: poppinsbold; margin-bottom: 20PX;" class="btn btn-outline-danger btn-lg" type="submit">Cadastrar!</button>
    
    </form>
  
  </div>
  


  <!-- ... scripts jQuery, Popper.js e Bootstrap ... -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    
    

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        
        var form = document.getElementById('registrationForm');
        var inputDate = document.getElementById('inputDate');
        var inputCPF = document.getElementById('inputCPF');


      // Adiciona um ouvinte de evento de mudança ao campo de data de nascimento
          inputDate.addEventListener('change', function () {
          validarDataNascimento();
        });
       
          // Previne o envio do formulário padrão
             event.preventDefault();

          // Verifica se todos os inputs são válidos
            if (form.checkValidity()) {
            // Redireciona para a tela de login
                window.location.href = "/Tela de login/login.html";
              } else {
                // Se o formulário não for válido, exibe as mensagens de erro e adiciona as classes Bootstrap
            form.reportValidity();

            // Adiciona as classes Bootstrap aos campos inválidos
              var invalidInputs = form.querySelectorAll(':invalid');
              invalidInputs.forEach(function (input) {
                input.classList.add('is-invalid');
                input.classList.remove('is-valid');
              });

            // Adiciona as classes Bootstrap aos campos válidos
              var validInputs = form.querySelectorAll(':valid');
              validInputs.forEach(function (input) {
                input.classList.add('is-valid');
                input.classList.remove('is-invalid');
              });
            }

        // Adiciona um ouvinte de evento de input para fornecer feedback em tempo real
          form.addEventListener('input', function (event) {
            if (event.target.checkValidity()) {
              event.target.classList.add('is-valid');
              event.target.classList.remove('is-invalid');
            } else {
              event.target.classList.add('is-invalid');
              event.target.classList.remove('is-valid');
            }
          });
        
           // Chama a função para preencher os dados do localStorage ao carregar a página
              preencherDadosDoLocalStorage();

        // Adiciona um evento de clique ao botão com a id="cadastro"
            document.getElementById('cadastro').addEventListener('click', function (event) {
              
              // Chama a função para salvar os dados no localStorage
                salvarDadosLocalStorage();
              
                // Previne o envio do formulário padrão
              event.preventDefault();
              
              // Verifica se todos os inputs são válidos
              if (document.getElementById('registrationForm').checkValidity()) {
                
                // Redireciona para a tela de login
                window.location.href = "/Tela de login/login.html";
              } else {
                // Se o formulário não for válido, exibe as mensagens de erro
                document.getElementById('registrationForm').reportValidity();
              }
            });

        // Função para salvar os dados no localStorage
            
              function salvarDadosLocalStorage() {
              // Obtém os valores dos campos do formulário
              var nome = document.getElementById('inputMaterno').value;
              var usuario = document.getElementById('inputName').value;
              var cpf = document.getElementById('inputCPF').value;
              var email = document.getElementById('inputEmail4').value;
              var celular = document.getElementById('inputCel').value;
              var cep = document.getElementById('inputCEP').value;
              
              // Cria um objeto para armazenar os dados
              var dadosUsuario = {
                'nome': nome,
                'usuario': usuario,
                'cpf': cpf,
                'email': email,
                'celular': celular,
                'cep': cep
              };

              // Converte o objeto para uma string JSON e armazena no localStorage
              localStorage.setItem('dadosUsuario', JSON.stringify(dadosUsuario));
            }

            // Preenche os campos do formulário com dados do localStorage, se existirem
            function preencherDadosDoLocalStorage() {
              var dadosUsuarioString = localStorage.getItem('dadosUsuario');
              if (dadosUsuarioString) {
                var dadosUsuario = JSON.parse(dadosUsuarioString);

              }
            }
          
        //funcionalidade para mostrar/ocultar a senha
          $('#togglePassword').on('click', function() {
                  var passwordField = $('#inputPassword4');
                  var passwordType = passwordField.attr('type');

                  if (passwordType === 'password') {
                      passwordField.attr('type', 'text');
                  } else {
                      passwordField.attr('type', 'password');
                  }
              });

            

        // Função para validar a data de nascimento
          function validarDataNascimento() {
            var dataNascimento = new Date(inputDate.value);
            var anoAtual = new Date().getFullYear();
            var anoLimiteInferior = 1993;
            var anoLimiteSuperior = anoAtual;


            if (
              dataNascimento.getFullYear() >= anoLimiteInferior &&
              dataNascimento.getFullYear() <= anoLimiteSuperior
              
            ) {
              // Adiciona a classe Bootstrap ao campo de data de nascimento válido
              inputDate.classList.add('is-valid');
              inputDate.classList.remove('is-invalid');
              return true;
            } else {
              // Adiciona a classe Bootstrap ao campo de data de nascimento inválido
              inputDate.classList.add('is-invalid');
              inputDate.classList.remove('is-valid');
              return false;
            }
          }

      // Função para validar o CPF
      function validarCPF() {
        // Remove caracteres não numéricos do CPF
        var cpf = inputCPF.value.replace(/\D/g, '');

        // Verifica se todos os dígitos do CPF são iguais
        if (/^(\d)\1+$/.test(cpf)) {
          // Adiciona a classe Bootstrap ao campo de CPF inválido
          inputCPF.classList.add('is-invalid');
          inputCPF.classList.remove('is-valid');
          return false;
        }

        // Validação simples de CPF (pode não ser totalmente precisa)
        var soma = 0;
        var resto;

        for (var i = 1; i <= 9; i++) {
          soma = soma + parseInt(cpf.substring(i-1, i)) * (11 - i);
        }

        resto = (soma * 10) % 11;

        if ((resto === 10) || (resto === 11)) {
          resto = 0;
        }

        if (resto !== parseInt(cpf.substring(9, 10))) {
          // Adiciona a classe Bootstrap ao campo de CPF inválido
          inputCPF.classList.add('is-invalid');
          inputCPF.classList.remove('is-valid');
          return false;
        }

        soma = 0;

        for (var i = 1; i <= 10; i++) {
          soma = soma + parseInt(cpf.substring(i-1, i)) * (12 - i);
        }

        resto = (soma * 10) % 11;

        if ((resto === 10) || (resto === 11)) {
          resto = 0;
        }

        if (resto !== parseInt(cpf.substring(10, 11))) {
          // Adiciona a classe Bootstrap ao campo de CPF inválido
          inputCPF.classList.add('is-invalid');
          inputCPF.classList.remove('is-valid');
          return false;
        }

        // Adiciona a classe Bootstrap ao campo de CPF válido
        inputCPF.classList.add('is-valid');
        inputCPF.classList.remove('is-invalid');
        return true;
      }

        // Adiciona um ouvinte de evento de mudança ao campo de senha
      var inputSenha = document.getElementById('inputPassword4');
      inputSenha.addEventListener('input', function () {
        validarSenha();
      });

      // Função para validar a senha
      function validarSenha() {
        var senha = inputSenha.value;

        // Verifica se a senha contém pelo menos uma letra maiúscula, uma letra minúscula e um número
        if (/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/.test(senha)) {
          // Adiciona a classe Bootstrap ao campo de senha válido
          inputSenha.classList.add('is-valid');
          inputSenha.classList.remove('is-invalid');
          return true;
        } else {
          // Adiciona a classe Bootstrap ao campo de senha inválido
          inputSenha.classList.add('is-invalid');
          inputSenha.classList.remove('is-valid');
          return false;
        }
      }

      var inputSenha = document.getElementById('inputPassword4');
    inputSenha.addEventListener('input', function () {
        validarSenha();
        validarConfirmacaoSenha();
    });

    // Adiciona um ouvinte de evento de mudança ao campo de confirmação de senha
    var inputConfirm = document.getElementById('inputConfirm');
    inputConfirm.addEventListener('input', function () {
        validarConfirmacaoSenha();
    });

    // Função para validar a confirmação de senha
        function validarConfirmacaoSenha() {
            var senha = inputSenha.value;
            var confirmacaoSenha = inputConfirm.value;

        if (senha === confirmacaoSenha) {
            // Se as senhas coincidem, adiciona as classes Bootstrap ao campo de confirmação de senha válido
            inputConfirm.classList.remove('is-invalid');
            inputConfirm.classList.add('is-valid');
            return true;
        } else {
            // Se as senhas não coincidem, adiciona as classes Bootstrap ao campo de confirmação de senha inválido
            inputConfirm.classList.remove('is-valid');
            inputConfirm.classList.add('is-invalid');
            return false;
        }
    }

        // Adiciona um ouvinte de evento de mudança ao campo de gênero
    var inputEstado = document.getElementById('inputSexo');
    inputSexo.addEventListener('change', function () {
        validarGênero();
    });

    // Função para validar o campo de gênero
    function validarGênero() {
                var isValidForm = true;

          $('form :input').each(function() {
              if (!validateField($(this))) {
                  isValidForm = false;
              }
          });

          if ($('#inputSexo').val() === '...') {
              alert('Por favor, selecione um gênero.');
              isValidForm = false;
              $('#inputSexo').removeClass('is-valid').addClass('is-invalid');
          }

          return isValidForm;
          }

      });
    </script>

  </body>
</html>


